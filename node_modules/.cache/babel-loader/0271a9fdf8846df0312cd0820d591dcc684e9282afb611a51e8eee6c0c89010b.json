{"ast":null,"code":"import { call, put, takeEvery, select } from 'redux-saga/effects';\nimport axios from 'axios';\nimport { CART_ADD_ITEM, CART_REMOVE_ITEM, CART_SAVE_SHIPPING_ADDRESS, CART_SAVE_PAYMENT_METHOD } from '../constants/cartConstants';\n\n// Cart API call functions\nfunction* addToCartSaga(action) {\n  try {\n    const {\n      id,\n      qty\n    } = action.payload;\n    const {\n      data\n    } = yield call(axios.get, `/api/products/${id}`);\n    yield put({\n      type: CART_ADD_ITEM,\n      payload: {\n        product: data._id,\n        name: data.name,\n        image: data.image,\n        price: data.price,\n        countInStock: data.countInStock,\n        qty\n      }\n    });\n    localStorage.setItem('cartItems', JSON.stringify(yield select(state => state.cart.cartItems)));\n  } catch (error) {\n    // handle error\n  }\n}\n\n// Cart API call functions\n\nfunction* removeFromCartSaga(action) {\n  try {\n    yield put({\n      type: CART_REMOVE_ITEM,\n      payload: action.payload\n    });\n    localStorage.setItem('cartItems', JSON.stringify(yield select(state => state.cart.cartItems)));\n  } catch (error) {\n    // handle error\n  }\n}\nfunction* saveShippingAddressSaga(action) {\n  try {\n    yield put({\n      type: CART_SAVE_SHIPPING_ADDRESS,\n      payload: action.payload\n    });\n    localStorage.setItem('shippingAddress', JSON.stringify(action.payload));\n  } catch (error) {\n    // handle error\n  }\n}\nfunction* savePaymentMethodSaga(action) {\n  try {\n    yield put({\n      type: CART_SAVE_PAYMENT_METHOD,\n      payload: action.payload\n    });\n    localStorage.setItem('paymentMethod', JSON.stringify(action.payload));\n  } catch (error) {\n    // handle error\n  }\n}\n\n// Watchers\nexport function* watchCartActions() {\n  yield takeEvery('CART_ADD_ITEM_REQUEST', addToCartSaga);\n  yield takeEvery('CART_REMOVE_ITEM_REQUEST', removeFromCartSaga);\n  yield takeEvery('CART_SAVE_SHIPPING_ADDRESS_REQUEST', saveShippingAddressSaga);\n  yield takeEvery('CART_SAVE_PAYMENT_METHOD_REQUEST', savePaymentMethodSaga);\n}","map":{"version":3,"names":["call","put","takeEvery","select","axios","CART_ADD_ITEM","CART_REMOVE_ITEM","CART_SAVE_SHIPPING_ADDRESS","CART_SAVE_PAYMENT_METHOD","addToCartSaga","action","id","qty","payload","data","get","type","product","_id","name","image","price","countInStock","localStorage","setItem","JSON","stringify","state","cart","cartItems","error","removeFromCartSaga","saveShippingAddressSaga","savePaymentMethodSaga","watchCartActions"],"sources":["F:/React Projects/Totality/front-end/src/sagas/cartSaga.js"],"sourcesContent":["import { call, put, takeEvery, select} from 'redux-saga/effects';\r\nimport axios from 'axios';\r\nimport {\r\n    CART_ADD_ITEM, CART_REMOVE_ITEM, CART_SAVE_SHIPPING_ADDRESS, CART_SAVE_PAYMENT_METHOD\r\n} from '../constants/cartConstants';\r\n\r\n// Cart API call functions\r\nfunction* addToCartSaga(action) {\r\n    try {\r\n        const { id, qty } = action.payload;\r\n        const { data } = yield call(axios.get, `/api/products/${id}`);\r\n        yield put({\r\n            type: CART_ADD_ITEM,\r\n            payload: {\r\n                product: data._id,\r\n                name: data.name,\r\n                image: data.image,\r\n                price: data.price,\r\n                countInStock: data.countInStock,\r\n                qty,\r\n            },\r\n        });\r\n        localStorage.setItem('cartItems', JSON.stringify(yield select(state => state.cart.cartItems)));\r\n    } catch (error) {\r\n        // handle error\r\n    }\r\n}\r\n\r\n// Cart API call functions\r\n\r\nfunction* removeFromCartSaga(action) {\r\n  try {\r\n      yield put({ type: CART_REMOVE_ITEM, payload: action.payload });\r\n      localStorage.setItem('cartItems', JSON.stringify(yield select(state => state.cart.cartItems)));\r\n  } catch (error) {\r\n      // handle error\r\n  }\r\n}\r\n\r\nfunction* saveShippingAddressSaga(action) {\r\n  try {\r\n      yield put({ type: CART_SAVE_SHIPPING_ADDRESS, payload: action.payload });\r\n      localStorage.setItem('shippingAddress', JSON.stringify(action.payload));\r\n  } catch (error) {\r\n      // handle error\r\n  }\r\n}\r\n\r\nfunction* savePaymentMethodSaga(action) {\r\n  try {\r\n      yield put({ type: CART_SAVE_PAYMENT_METHOD, payload: action.payload });\r\n      localStorage.setItem('paymentMethod', JSON.stringify(action.payload));\r\n  } catch (error) {\r\n      // handle error\r\n  }\r\n}\r\n\r\n// Watchers\r\nexport function* watchCartActions() {\r\n  yield takeEvery('CART_ADD_ITEM_REQUEST', addToCartSaga);\r\n  yield takeEvery('CART_REMOVE_ITEM_REQUEST', removeFromCartSaga);\r\n  yield takeEvery('CART_SAVE_SHIPPING_ADDRESS_REQUEST', saveShippingAddressSaga);\r\n  yield takeEvery('CART_SAVE_PAYMENT_METHOD_REQUEST', savePaymentMethodSaga);\r\n}\r\n"],"mappings":"AAAA,SAASA,IAAI,EAAEC,GAAG,EAAEC,SAAS,EAAEC,MAAM,QAAO,oBAAoB;AAChE,OAAOC,KAAK,MAAM,OAAO;AACzB,SACIC,aAAa,EAAEC,gBAAgB,EAAEC,0BAA0B,EAAEC,wBAAwB,QAClF,4BAA4B;;AAEnC;AACA,UAAUC,aAAaA,CAACC,MAAM,EAAE;EAC5B,IAAI;IACA,MAAM;MAAEC,EAAE;MAAEC;IAAI,CAAC,GAAGF,MAAM,CAACG,OAAO;IAClC,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAMd,IAAI,CAACI,KAAK,CAACW,GAAG,EAAE,iBAAiBJ,EAAE,EAAE,CAAC;IAC7D,MAAMV,GAAG,CAAC;MACNe,IAAI,EAAEX,aAAa;MACnBQ,OAAO,EAAE;QACLI,OAAO,EAAEH,IAAI,CAACI,GAAG;QACjBC,IAAI,EAAEL,IAAI,CAACK,IAAI;QACfC,KAAK,EAAEN,IAAI,CAACM,KAAK;QACjBC,KAAK,EAAEP,IAAI,CAACO,KAAK;QACjBC,YAAY,EAAER,IAAI,CAACQ,YAAY;QAC/BV;MACJ;IACJ,CAAC,CAAC;IACFW,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACC,SAAS,CAAC,MAAMvB,MAAM,CAACwB,KAAK,IAAIA,KAAK,CAACC,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC;EAClG,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZ;EAAA;AAER;;AAEA;;AAEA,UAAUC,kBAAkBA,CAACrB,MAAM,EAAE;EACnC,IAAI;IACA,MAAMT,GAAG,CAAC;MAAEe,IAAI,EAAEV,gBAAgB;MAAEO,OAAO,EAAEH,MAAM,CAACG;IAAQ,CAAC,CAAC;IAC9DU,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACC,SAAS,CAAC,MAAMvB,MAAM,CAACwB,KAAK,IAAIA,KAAK,CAACC,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC;EAClG,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZ;EAAA;AAEN;AAEA,UAAUE,uBAAuBA,CAACtB,MAAM,EAAE;EACxC,IAAI;IACA,MAAMT,GAAG,CAAC;MAAEe,IAAI,EAAET,0BAA0B;MAAEM,OAAO,EAAEH,MAAM,CAACG;IAAQ,CAAC,CAAC;IACxEU,YAAY,CAACC,OAAO,CAAC,iBAAiB,EAAEC,IAAI,CAACC,SAAS,CAAChB,MAAM,CAACG,OAAO,CAAC,CAAC;EAC3E,CAAC,CAAC,OAAOiB,KAAK,EAAE;IACZ;EAAA;AAEN;AAEA,UAAUG,qBAAqBA,CAACvB,MAAM,EAAE;EACtC,IAAI;IACA,MAAMT,GAAG,CAAC;MAAEe,IAAI,EAAER,wBAAwB;MAAEK,OAAO,EAAEH,MAAM,CAACG;IAAQ,CAAC,CAAC;IACtEU,YAAY,CAACC,OAAO,CAAC,eAAe,EAAEC,IAAI,CAACC,SAAS,CAAChB,MAAM,CAACG,OAAO,CAAC,CAAC;EACzE,CAAC,CAAC,OAAOiB,KAAK,EAAE;IACZ;EAAA;AAEN;;AAEA;AACA,OAAO,UAAUI,gBAAgBA,CAAA,EAAG;EAClC,MAAMhC,SAAS,CAAC,uBAAuB,EAAEO,aAAa,CAAC;EACvD,MAAMP,SAAS,CAAC,0BAA0B,EAAE6B,kBAAkB,CAAC;EAC/D,MAAM7B,SAAS,CAAC,oCAAoC,EAAE8B,uBAAuB,CAAC;EAC9E,MAAM9B,SAAS,CAAC,kCAAkC,EAAE+B,qBAAqB,CAAC;AAC5E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}