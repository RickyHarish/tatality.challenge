{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useHistory}from'react-router-use-history';import{useParams}from'react-router-dom';import{Form,Button}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import{getUserDetails,updateUser}from'../actions/userActions';import FormContainer from'../components/FormContainer';import{USER_UPDATE_RESET}from'../constants/userConstants';import Meta from'../components/Meta';const UserEditScreen=()=>{const{id}=useParams();const userId=id;const[name,setName]=useState('');const[email,setEmail]=useState('');const[isAdmin,setIsAdmin]=useState(false);const dispatch=useDispatch();const history=useHistory();const userDetails=useSelector(state=>state.userDetails);const{loading,error,user}=userDetails;const userUpdate=useSelector(state=>state.userUpdate);const{loading:loadingUpdate,error:errorUpdate,success:successUpdate}=userUpdate;useEffect(()=>{if(successUpdate){dispatch({type:USER_UPDATE_RESET});history.push('/admin/userlist');}},[dispatch,history,successUpdate]);useEffect(()=>{if(!user||!user.name||user._id!==userId){dispatch(getUserDetails(userId));}else{setName(user.name);setEmail(user.email);setIsAdmin(user.isAdmin);}},[user,userId,dispatch]);const submitHandler=e=>{e.preventDefault();dispatch(updateUser({_id:userId,name,email,isAdmin}));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Meta,{title:\"Edit Your Details\"}),/*#__PURE__*/React.createElement(Link,{to:\"/admin/userlist\",className:\"btn btn-light my-3\"},\"Go Back\"),/*#__PURE__*/React.createElement(FormContainer,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Edit User\"),loadingUpdate&&/*#__PURE__*/React.createElement(Loader,null),errorUpdate&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},errorUpdate),loading?/*#__PURE__*/React.createElement(Loader,null):error?/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(Form,{onSubmit:submitHandler},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"name\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Name\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",placeholder:\"Enter Name\",value:name,onChange:e=>setName(e.target.value)})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"email\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Email Address\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",placeholder:\"Enter Email\",value:email,onChange:e=>setEmail(e.target.value)})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"idAdmin\"},/*#__PURE__*/React.createElement(Form.Check,{type:\"checkbox\",label:\"Is Admin\",checked:isAdmin,onChange:e=>setIsAdmin(e.target.checked)})),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"primary\"},\"Update\"))));};export default UserEditScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","useHistory","useParams","Form","Button","useDispatch","useSelector","Message","Loader","getUserDetails","updateUser","FormContainer","USER_UPDATE_RESET","Meta","UserEditScreen","id","userId","name","setName","email","setEmail","isAdmin","setIsAdmin","dispatch","history","userDetails","state","loading","error","user","userUpdate","loadingUpdate","errorUpdate","success","successUpdate","type","push","_id","submitHandler","e","preventDefault","createElement","Fragment","title","to","className","variant","onSubmit","Group","controlId","Label","Control","placeholder","value","onChange","target","Check","label","checked"],"sources":["F:/React Projects/Totality/front-end/src/screens/UserEditScreen.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport { useHistory } from 'react-router-use-history'\r\nimport { useParams } from 'react-router-dom'\r\nimport { Form, Button } from 'react-bootstrap'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport { getUserDetails, updateUser} from '../actions/userActions'\r\nimport FormContainer from '../components/FormContainer'\r\nimport { USER_UPDATE_RESET } from '../constants/userConstants'\r\nimport Meta from '../components/Meta'\r\n\r\nconst UserEditScreen = () => {\r\n    const {id} = useParams()\r\n    const userId = id\r\n    const [name, setName] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [isAdmin, setIsAdmin] = useState(false)\r\n    \r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n\r\n    const userDetails = useSelector(state=>state.userDetails)\r\n    const {loading, error, user} = userDetails\r\n    \r\n    const userUpdate = useSelector(state=>state.userUpdate)\r\n    const {loading:loadingUpdate, error:errorUpdate, success:successUpdate} = userUpdate\r\n    \r\n\r\n    useEffect(()=>{\r\n      if(successUpdate){\r\n        dispatch({type:USER_UPDATE_RESET})\r\n        history.push('/admin/userlist')\r\n      }\r\n      \r\n    }, [dispatch, history, successUpdate])\r\n\r\n\r\n\r\n    useEffect(()=>{\r\n    if( !user || !user.name || user._id !== userId){\r\n        dispatch(getUserDetails(userId))\r\n    }else{\r\n      setName(user.name)\r\n      setEmail(user.email)\r\n      setIsAdmin(user.isAdmin)\r\n    }\r\n    }, [user, userId, dispatch])\r\n\r\n\r\n    const submitHandler=(e)=>{\r\n        e.preventDefault()\r\n        dispatch(updateUser({_id: userId, name, email, isAdmin}))\r\n    }\r\n\r\n\r\n  return (\r\n    <>\r\n    <Meta title='Edit Your Details' />\r\n    <Link to='/admin/userlist' className='btn btn-light my-3'>\r\n        Go Back\r\n    </Link>\r\n    <FormContainer>\r\n      <h1>Edit User</h1>\r\n      {loadingUpdate && <Loader/>}\r\n      {errorUpdate && <Message variant='danger'>{errorUpdate}</Message>}\r\n      {loading? <Loader/> : error ? <Message variant='danger'>{error}</Message>:\r\n      (\r\n      <Form onSubmit={submitHandler}>\r\n      <Form.Group controlId='name'>\r\n            <Form.Label>Name</Form.Label>\r\n            <Form.Control type='text' placeholder='Enter Name' value={name} onChange={(e)=>setName(e.target.value)}>\r\n            </Form.Control>\r\n        </Form.Group>\r\n        <Form.Group controlId='email'>\r\n            <Form.Label>Email Address</Form.Label>\r\n            <Form.Control type='email' placeholder='Enter Email' value={email} onChange={(e)=>setEmail(e.target.value)}>\r\n            </Form.Control>\r\n        </Form.Group>\r\n        \r\n        <Form.Group controlId='idAdmin'>\r\n            <Form.Check \r\n            type='checkbox'  \r\n            label='Is Admin'\r\n            checked={isAdmin}\r\n            onChange={(e)=>setIsAdmin(e.target.checked)}\r\n            > \r\n            </Form.Check>\r\n        </Form.Group>\r\n        <Button type='submit' variant='primary'>\r\n            Update\r\n        </Button>        \r\n      </Form>\r\n      )}      \r\n    </FormContainer>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default UserEditScreen\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}