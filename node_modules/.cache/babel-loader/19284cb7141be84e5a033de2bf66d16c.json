{"ast":null,"code":"import React,{useEffect}from'react';import{Link,useParams,useLocation}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{useHistory}from'react-router-use-history';import Message from'../components/Message';// import Loader from '../components/Loader'\nimport{addToCart,removeFromCart}from'../actions/cartActions';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import Meta from'../components/Meta';const CartScreen=_ref=>{let{match}=_ref;const{id}=useParams();const productId=id;const location=useLocation();const history=useHistory();const qty=location.search?Number(location.search.split('=')[1]):1;console.log(qty);const dispatch=useDispatch();const cart=useSelector(state=>state.cart);const{cartItems}=cart;useEffect(()=>{if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);const removeFromCartHandler=id=>{dispatch(removeFromCart(id));};const handleQuantityChange=(productId,quantity)=>{dispatch(addToCart(productId,quantity));};const checkoutHandler=()=>{history.push('/login?redirect=shipping');};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Meta,{title:\"Shopping Cart\"}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(\"h1\",null,\"Shopping Cart\"),cartItems.length===0?/*#__PURE__*/React.createElement(Message,null,\"Your Cart is Empty\",/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Go Back\")):/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},cartItems.map(item=>/*#__PURE__*/React.createElement(ListGroup.Item,{key:item.product},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:2},/*#__PURE__*/React.createElement(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})),/*#__PURE__*/React.createElement(Col,{md:3},/*#__PURE__*/React.createElement(Link,{to:\"/product/\".concat(item.product)},item.name)),/*#__PURE__*/React.createElement(Col,{md:2},\"\\u20B9 \",item.price),/*#__PURE__*/React.createElement(Col,{md:2},/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",value:item.qty,onChange:e=>handleQuantityChange(item.product,Number(e.target.value))},[...Array(item.countInStock).keys()].map(x=>/*#__PURE__*/React.createElement(\"option\",{key:x+1,value:x+1},x+1)))),/*#__PURE__*/React.createElement(Col,{md:2},/*#__PURE__*/React.createElement(Button,{type:\"button\",variant:\"light\",onClick:()=>removeFromCartHandler(item.product)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-trash\"})))))))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Subtotal (\",cartItems.reduce((acc,item)=>acc+item.qty,0),\") items\"),\"\\u20B9 \",cartItems.reduce((acc,item)=>acc+item.qty*item.price,0).toFixed(2)),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Button,{className:\"btn-block\",type:\"button\",disabled:cartItems.length===0,onClick:checkoutHandler},\"Proceed To Checkout\")))))));};export default CartScreen;","map":{"version":3,"names":["React","useEffect","Link","useParams","useLocation","useDispatch","useSelector","useHistory","Message","addToCart","removeFromCart","Row","Col","ListGroup","Image","Form","Button","Card","Meta","CartScreen","_ref","match","id","productId","location","history","qty","search","Number","split","console","log","dispatch","cart","state","cartItems","removeFromCartHandler","handleQuantityChange","quantity","checkoutHandler","push","createElement","Fragment","title","md","length","to","variant","map","item","Item","key","product","src","image","alt","name","fluid","rounded","concat","price","Control","as","value","onChange","e","target","Array","countInStock","keys","x","type","onClick","className","reduce","acc","toFixed","disabled"],"sources":["F:/React Projects/Totality/front-end/src/screens/CartScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Link, useParams, useLocation } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-use-history'\r\nimport Message from '../components/Message'\r\n// import Loader from '../components/Loader'\r\nimport { addToCart, removeFromCart } from '../actions/cartActions'\r\nimport { Row, Col, ListGroup, Image, Form, Button, Card } from 'react-bootstrap'\r\nimport Meta from '../components/Meta'\r\n\r\nconst CartScreen = ({match}) => {\r\n    const {id} = useParams()\r\n    const productId = id\r\n    const location = useLocation()\r\n    const history = useHistory()\r\n    const qty = location.search ? Number(location.search.split('=')[1]) : 1\r\n    console.log(qty)\r\n    const dispatch = useDispatch()\r\n\r\n    const cart = useSelector(state=>state.cart)\r\n    const {cartItems} = cart\r\n\r\n    useEffect(()=>{\r\n      if(productId){\r\n        dispatch(addToCart(productId, qty))\r\n\r\n      }\r\n    }, [dispatch, productId, qty])\r\n\r\n    const removeFromCartHandler=(id)=>{\r\n        dispatch(removeFromCart(id))\r\n    }\r\n\r\n    const handleQuantityChange=(productId, quantity)=>{\r\n        dispatch(addToCart(productId, quantity))\r\n    }\r\n\r\n    const checkoutHandler=()=>{\r\n      history.push('/login?redirect=shipping')\r\n    }\r\n\r\n  return (\r\n    <>\r\n    <Meta title='Shopping Cart'/>\r\n    <Row>\r\n      <Col md={8}>\r\n          <h1>Shopping Cart</h1>\r\n          {cartItems.length===0?<Message>Your Cart is Empty<Link to=\"/\">Go Back</Link></Message>:(\r\n            <ListGroup variant='flush'>\r\n              {cartItems.map(item=>(\r\n                <ListGroup.Item key={item.product}>\r\n                  <Row>\r\n                    <Col md={2}>\r\n                      <Image src={item.image} alt={item.name} fluid rounded  />\r\n                    </Col>\r\n                    <Col md={3}>\r\n                      <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                    </Col>\r\n                    <Col md={2}>\r\n                    {`\\u20B9 `}{item.price}\r\n                    </Col>\r\n                    <Col md={2}>\r\n                      <Form.Control as='select' value={item.qty} onChange={(e)=>handleQuantityChange(item.product, Number(e.target.value))} >\r\n                            {[...Array(item.countInStock).keys()].map(x => (\r\n                            <option key={x+1} value={x+1} >{x+1}</option>\r\n                            ))}\r\n                      </Form.Control>\r\n                    </Col>\r\n                    <Col md={2}>\r\n                      <Button type='button'  variant='light' onClick={()=>removeFromCartHandler(item.product)}>\r\n                        <i className='fas fa-trash'></i>\r\n                      </Button>\r\n                    </Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n              ))}\r\n            </ListGroup>\r\n          )}\r\n      </Col>\r\n      <Col md={4}>\r\n        <Card>\r\n          <ListGroup variant='flush'>\r\n            <ListGroup.Item>\r\n              <h2>Subtotal ({cartItems.reduce((acc, item)=> acc+item.qty, 0)}) items</h2>\r\n              {`\\u20B9 `}{cartItems.reduce((acc, item)=>acc+item.qty* item.price, 0).toFixed(2)}\r\n            </ListGroup.Item> \r\n            <ListGroup.Item>\r\n              <Button \r\n              className='btn-block' \r\n              type='button' \r\n              disabled={cartItems.length===0}\r\n              onClick={checkoutHandler}\r\n              >\r\n                Proceed To Checkout \r\n              </Button>\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default CartScreen\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}