{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button,Row,Col}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{useHistory}from'react-router-use-history';import{useParams}from'react-router-dom';import Message from'../components/Message';import Loader from'../components/Loader';import Paginate from'../components/Paginate';import{listProducts,deleteProduct,createProduct}from'../actions/productActions';import{PRODUCT_CREATE_RESET}from'../constants/productConstants';import Meta from'../components/Meta';const ProductListScreen=()=>{const history=useHistory();const{pageNumber}=useParams();const currentPageNumber=pageNumber?parseInt(pageNumber):1;const dispatch=useDispatch();const productList=useSelector(state=>state.productList);const{loading,error,products,page,pages}=productList;const productDelete=useSelector(state=>state.productDelete);const{loading:loadingDelete,error:errorDelete,success:successDelete}=productDelete;const productCreate=useSelector(state=>state.productCreate);const{loading:loadingCreate,error:errorCreate,success:successCreate,product:createdProduct}=productCreate;const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;useEffect(()=>{dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo||!userInfo.isAdmin){history.push('/login');}if(successCreate){history.push(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts('',currentPageNumber));}// eslint-disable-next-line\n},[dispatch,userInfo,successDelete,successCreate,createdProduct,currentPageNumber]);const deleteHandler=id=>{if(window.confirm('Are you sure')){dispatch(deleteProduct(id));}};const createProductHandler=()=>{dispatch(createProduct());};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Meta,{title:\"Products List\"}),/*#__PURE__*/React.createElement(Row,{className:\"align-items-center\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Products\")),/*#__PURE__*/React.createElement(Col,{className:\"text-right\"},/*#__PURE__*/React.createElement(Button,{className:\"my-3\",onClick:createProductHandler},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-plus\"}),\" Create Product\"))),loadingDelete&&/*#__PURE__*/React.createElement(Loader,null),errorDelete&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},errorDelete),loadingCreate&&/*#__PURE__*/React.createElement(Loader,null),errorCreate&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},errorCreate),loading?/*#__PURE__*/React.createElement(Loader,null):error?/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"NAME\"),/*#__PURE__*/React.createElement(\"th\",null,\"PRICE\"),/*#__PURE__*/React.createElement(\"th\",null,\"CATEGORY\"),/*#__PURE__*/React.createElement(\"th\",null,\"BRAND\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,products.map(product=>/*#__PURE__*/React.createElement(\"tr\",{key:product._id},/*#__PURE__*/React.createElement(\"td\",null,product._id),/*#__PURE__*/React.createElement(\"td\",null,product.name),/*#__PURE__*/React.createElement(\"td\",null,\"\\u20B9 \",product.price),/*#__PURE__*/React.createElement(\"td\",null,product.category),/*#__PURE__*/React.createElement(\"td\",null,product.brand),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\")},/*#__PURE__*/React.createElement(Button,{variant:\"light\",className:\"btn-sm\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-edit\"}))),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",className:\"btn-sm\",onClick:()=>deleteHandler(product._id)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-trash\"}))))))),/*#__PURE__*/React.createElement(Paginate,{pages:pages,page:page,isAdmin:true})));};export default ProductListScreen;","map":{"version":3,"names":["React","useEffect","LinkContainer","Table","Button","Row","Col","useDispatch","useSelector","useHistory","useParams","Message","Loader","Paginate","listProducts","deleteProduct","createProduct","PRODUCT_CREATE_RESET","Meta","ProductListScreen","history","pageNumber","currentPageNumber","parseInt","dispatch","productList","state","loading","error","products","page","pages","productDelete","loadingDelete","errorDelete","success","successDelete","productCreate","loadingCreate","errorCreate","successCreate","product","createdProduct","userLogin","userInfo","type","isAdmin","push","concat","_id","deleteHandler","id","window","confirm","createProductHandler","createElement","Fragment","title","className","onClick","variant","striped","bordered","hover","responsive","map","key","name","price","category","brand","to"],"sources":["F:/React Projects/Totality/front-end/src/screens/ProductListScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { Table, Button, Row, Col } from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport {useHistory} from 'react-router-use-history'\r\nimport { useParams } from 'react-router-dom'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport Paginate from '../components/Paginate'\r\nimport {\r\n  listProducts,\r\n  deleteProduct,\r\n  createProduct,\r\n} from '../actions/productActions'\r\nimport { PRODUCT_CREATE_RESET } from '../constants/productConstants'\r\nimport Meta from '../components/Meta'\r\n\r\nconst ProductListScreen = () => {\r\n  const history = useHistory()\r\n  const {pageNumber} = useParams()\r\n  const currentPageNumber = pageNumber? parseInt(pageNumber):1\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const productList = useSelector((state) => state.productList)\r\n  const { loading, error, products, page, pages } = productList\r\n\r\n  const productDelete = useSelector((state) => state.productDelete)\r\n  \r\n  const {\r\n    loading: loadingDelete,\r\n    error: errorDelete,\r\n    success: successDelete,\r\n  } = productDelete\r\n\r\n  const productCreate = useSelector((state) => state.productCreate)\r\n  const {\r\n    loading: loadingCreate,\r\n    error: errorCreate,\r\n    success: successCreate,\r\n    product: createdProduct,\r\n  } = productCreate\r\n\r\n  const userLogin = useSelector((state) => state.userLogin)\r\n  const { userInfo } = userLogin\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: PRODUCT_CREATE_RESET })\r\n\r\n    if (!userInfo || !userInfo.isAdmin) {\r\n      history.push('/login')\r\n    }\r\n\r\n    if (successCreate) {\r\n      history.push(`/admin/product/${createdProduct._id}/edit`)\r\n    } else {\r\n      dispatch(listProducts('', currentPageNumber))\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [\r\n    dispatch,\r\n    userInfo,\r\n    successDelete,\r\n    successCreate,\r\n    createdProduct,\r\n    currentPageNumber,\r\n  ])\r\n\r\n  const deleteHandler = (id) => {\r\n    if (window.confirm('Are you sure')) {\r\n      dispatch(deleteProduct(id))\r\n    }\r\n  }\r\n\r\n  const createProductHandler = () => {\r\n    dispatch(createProduct())\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <Meta title='Products List' />\r\n      <Row className='align-items-center'>\r\n        <Col>\r\n          <h1>Products</h1>\r\n        </Col>\r\n        <Col className='text-right'>\r\n          <Button className='my-3' onClick={createProductHandler}>\r\n            <i className='fas fa-plus'></i> Create Product\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      {loadingDelete && <Loader />}\r\n      {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\r\n      {loadingCreate && <Loader />}\r\n      {errorCreate && <Message variant='danger'>{errorCreate}</Message>}\r\n      {loading ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message variant='danger'>{error}</Message>\r\n      ) : (\r\n        <>\r\n          <Table striped bordered hover responsive className='table-sm'>\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>NAME</th>\r\n                <th>PRICE</th>\r\n                <th>CATEGORY</th>\r\n                <th>BRAND</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products.map((product) => (\r\n                <tr key={product._id}>\r\n                  <td>{product._id}</td>\r\n                  <td>{product.name}</td>\r\n                  <td>{`\\u20B9 `}{product.price}</td>\r\n                  <td>{product.category}</td>\r\n                  <td>{product.brand}</td>\r\n                  <td>\r\n                    <LinkContainer to={`/admin/product/${product._id}/edit`}>\r\n                      <Button variant='light' className='btn-sm'>\r\n                        <i className='fas fa-edit'></i>\r\n                      </Button>\r\n                    </LinkContainer>\r\n                    <Button\r\n                      variant='danger'\r\n                      className='btn-sm'\r\n                      onClick={() => deleteHandler(product._id)}\r\n                    >\r\n                      <i className='fas fa-trash'></i>\r\n                    </Button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n          <Paginate pages={pages} page={page} isAdmin={true} />\r\n        </>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ProductListScreen"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}