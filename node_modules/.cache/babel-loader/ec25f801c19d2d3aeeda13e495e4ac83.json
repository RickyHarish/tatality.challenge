{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{useHistory}from'react-router-use-history';import{Table,Button}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import{listUsers,deleteUser}from'../actions/userActions';import Meta from'../components/Meta';const UserListScreen=()=>{//    const [deleted, setDeleted] = useState(false);\nconst dispatch=useDispatch();const history=useHistory();const userList=useSelector(state=>state.userList);const{loading,error,users}=userList;const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;const userDelete=useSelector(state=>state.userDelete);const{success:successDelete}=userDelete;useEffect(()=>{if(userInfo&&userInfo.isAdmin){dispatch(listUsers());}},[dispatch,userInfo]);useEffect(()=>{if(!userInfo||!userInfo.isAdmin){history.push('/login');}// eslint-disable-next-line\n},[history,successDelete]);const deleteHandler=id=>{if(window.confirm(\"Are you sure want to delete this user?\")){dispatch(deleteUser(id)).then(()=>{// User successfully deleted, now fetch the updated user list\ndispatch(listUsers());}).catch(error=>{// Handle error if deletion fails\nconsole.error('Error deleting user:',error);});}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Meta,{title:\"Users List\"}),/*#__PURE__*/React.createElement(\"h1\",null,\"Users\"),loading?/*#__PURE__*/React.createElement(Loader,null):error?/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"NAME\"),/*#__PURE__*/React.createElement(\"th\",null,\"EMAIL\"),/*#__PURE__*/React.createElement(\"th\",null,\"ADMIN\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,users&&users.map(user=>/*#__PURE__*/React.createElement(\"tr\",{key:user._id},/*#__PURE__*/React.createElement(\"td\",null,user._id),/*#__PURE__*/React.createElement(\"td\",null,user.name),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"mailto:\".concat(user.email)},user.email)),/*#__PURE__*/React.createElement(\"td\",null,user.isAdmin?/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-check\",style:{color:'green'}}):/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-times\",style:{color:'red'}})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(LinkContainer,{to:\"/admin/user/\".concat(user._id,\"/edit\")},/*#__PURE__*/React.createElement(Button,{variant:\"light\",className:\"btn-sm\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-edit\"}))),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",className:\"btn-sm\",onClick:()=>deleteHandler(user._id)},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-trash\"}))))))));};export default UserListScreen;","map":{"version":3,"names":["React","useEffect","LinkContainer","useHistory","Table","Button","useDispatch","useSelector","Message","Loader","listUsers","deleteUser","Meta","UserListScreen","dispatch","history","userList","state","loading","error","users","userLogin","userInfo","userDelete","success","successDelete","isAdmin","push","deleteHandler","id","window","confirm","then","catch","console","createElement","Fragment","title","variant","striped","bordered","hover","responsive","className","map","user","key","_id","name","href","concat","email","style","color","to","onClick"],"sources":["F:/React Projects/Totality/front-end/src/screens/UserListScreen.js"],"sourcesContent":["import React, {useEffect} from 'react'\r\nimport {LinkContainer} from 'react-router-bootstrap'\r\nimport { useHistory } from 'react-router-use-history'\r\nimport { Table, Button} from 'react-bootstrap'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport Loader from '../components/Loader'\r\nimport { listUsers, deleteUser } from '../actions/userActions'\r\nimport Meta from '../components/Meta'\r\n\r\nconst UserListScreen = () => {\r\n//    const [deleted, setDeleted] = useState(false);\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const userList = useSelector(state=>state.userList)\r\n    const {loading, error, users} = userList\r\n\r\n    const userLogin = useSelector(state=>state.userLogin)\r\n    const {userInfo} = userLogin\r\n\r\n    const userDelete = useSelector(state=>state.userDelete)\r\n    const {success:successDelete} = userDelete\r\n\r\n    useEffect(()=>{\r\n      if(userInfo && userInfo.isAdmin){\r\n        dispatch(listUsers())\r\n      }\r\n        \r\n    }, [dispatch, userInfo])\r\n\r\n    useEffect(()=>{\r\n      if(!userInfo || !userInfo.isAdmin){\r\n        history.push('/login')\r\n      }\r\n      // eslint-disable-next-line\r\n    }, [history, successDelete])\r\n\r\n\r\n    const deleteHandler=(id)=>{\r\n      if(window.confirm(\"Are you sure want to delete this user?\")){\r\n        dispatch(deleteUser(id))\r\n        .then(() => {\r\n          // User successfully deleted, now fetch the updated user list\r\n          dispatch(listUsers());\r\n      })\r\n      .catch((error) => {\r\n        // Handle error if deletion fails\r\n        console.error('Error deleting user:', error);\r\n    });\r\n      }\r\n    }\r\n\r\n\r\n  return (\r\n    <>\r\n    <Meta title='Users List' />\r\n      <h1>Users</h1>\r\n      {loading? <Loader/>: error? <Message variant='danger'>{error}</Message>:(\r\n        <Table striped bordered hover responsive className='table-sm'>\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>NAME</th>\r\n              <th>EMAIL</th>\r\n              <th>ADMIN</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {users && users.map(user=>(\r\n              <tr key={user._id}>\r\n                <td>{user._id}</td>\r\n                <td>{user.name}</td>\r\n                <td><a href={`mailto:${user.email}`}>{user.email}</a></td>\r\n                <td>{user.isAdmin? (<i className='fas fa-check' style={{color:'green'}}></i>):(\r\n                  <i className='fas fa-times' style={{color:'red'}}></i>\r\n                )}</td>\r\n                <td>\r\n                  <LinkContainer to={`/admin/user/${user._id}/edit`}>\r\n                    <Button variant='light' className='btn-sm'>\r\n                      <i  className='fas fa-edit'></i>\r\n                    </Button>\r\n                  </LinkContainer>\r\n                  <Button variant='danger' className='btn-sm' onClick={()=>\r\n                  deleteHandler(user._id)}>\r\n                    <i className='fas fa-trash'></i>\r\n                  </Button>\r\n                </td>\r\n              </tr>\r\n            ))\r\n            }\r\n          </tbody>\r\n        </Table>\r\n      )}  \r\n    </>\r\n  )\r\n}\r\n\r\nexport default UserListScreen\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}